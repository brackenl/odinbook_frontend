(this.webpackJsonpodinbook_frontend=this.webpackJsonpodinbook_frontend||[]).push([[0],{198:function(e,t,n){},219:function(e,t,n){},223:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(0),i=n.n(r),c=n(14),s=n.n(c),o=n(26),l=n(297),d=n(176),u=Object(d.a)({palette:{primary:{main:"#2a4067"},secondary:{main:"#227bef"}}}),j=(n(198),n(7)),b=n(16),m=n(156),h=n.n(m).a.create({baseURL:"https://odinbook-react.herokuapp.com/api"});var p=function(e,t){var n=Object(r.useState)((function(){try{var n=window.localStorage.getItem(e);return"user"===e&&n&&(h.defaults.headers.common.Authorization=JSON.parse(n).token),n?JSON.parse(n):t}catch(a){return console.log(a),t}})),a=Object(j.a)(n,2),i=a[0],c=a[1];return[i,function(t){try{var n=t instanceof Function?t(i):t;c(n),window.localStorage.setItem(e,JSON.stringify(n))}catch(a){console.log(a)}}]},x=n(274),f=n(280),O=n(281),g=n(282),v=n(159),C=n.n(v),k=n(160),w=n.n(k),N=n(283),y=n(177),_=n(300),F=n(302),S=n(276),P=n(225),I=n(277),R=n(278),q=n(279),L=n(104),A=n.n(L),T=n(105),U=n.n(T),E=n(158),D=n.n(E),B=n(157),W=n.n(B),K=n(301),z=function(e){var t=e.user,n=Object(r.useState)(""),i=Object(j.a)(n,2),c=i[0],s=i[1];return Object(r.useEffect)((function(){t&&s("".concat(t.first_name[0]," ").concat(t.last_name[0]))}),[t]),Object(a.jsx)(K.a,{alt:"".concat(t.first_name," ").concat(t.last_name),src:t.profilePicUrl?t.profilePicUrl:"",children:t.profilePicUrl?null:c})},H=Object(x.a)({list:{width:300},paper:{background:"rgb(32,33,34)",color:"white"}}),M=function(e){var t=e.user,n=e.drawerOpen,r=e.toggleDrawer,c=e.handleLogOut,s=Object(b.f)(),o=H(),l=function(e){s.push(e),r()};return Object(a.jsx)("div",{children:Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(F.a,{open:n,onClose:r,classes:{paper:o.paper},children:Object(a.jsxs)(S.a,{className:o.list,children:[Object(a.jsxs)(P.a,{button:!0,onClick:function(){return l("/users/".concat(t.id))},children:[Object(a.jsx)(I.a,{children:Object(a.jsx)(z,{user:t})}),Object(a.jsx)(R.a,{primary:"".concat(t.first_name," ").concat(t.last_name)})]}),Object(a.jsx)(q.a,{}),Object(a.jsxs)(P.a,{button:!0,onClick:function(){return l("/")},children:[Object(a.jsx)(I.a,{children:Object(a.jsx)(W.a,{})}),Object(a.jsx)(R.a,{primary:"Home"})]}),Object(a.jsx)(q.a,{}),Object(a.jsxs)(P.a,{button:!0,children:[Object(a.jsx)(I.a,{children:Object(a.jsx)(A.a,{})}),Object(a.jsx)(R.a,{primary:"Friends",onClick:function(){return l("/friends")}})]}),Object(a.jsx)(q.a,{}),Object(a.jsxs)(P.a,{button:!0,children:[Object(a.jsx)(I.a,{children:Object(a.jsx)(U.a,{})}),Object(a.jsx)(R.a,{primary:"Account",onClick:function(){return l("/account")}})]}),Object(a.jsx)(q.a,{}),Object(a.jsxs)(P.a,{button:!0,children:[Object(a.jsx)(I.a,{children:Object(a.jsx)(D.a,{})}),Object(a.jsx)(R.a,{primary:"Log out",onClick:c})]})]})})})})},G=Object(x.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1,display:"flex",justifyContent:"flex-start",cursor:"pointer"}}})),J=function(e){var t=e.user,n=e.setUser,i=G(),c=Object(b.f)(),s=Object(r.useState)(null),o=Object(j.a)(s,2),l=o[0],d=o[1],u=Object(r.useState)(!1),m=Object(j.a)(u,2),h=m[0],p=m[1],x=Boolean(l),v=function(){d(null)},k=function(){p(!h)},F=function(){n(""),v(),p(!1),c.push("/login")};return Object(a.jsx)("div",{className:i.root,children:Object(a.jsx)(f.a,{position:"static",children:Object(a.jsxs)(O.a,{className:i.toolbar,children:[t?Object(a.jsx)(_.a,{lgUp:!0,children:Object(a.jsx)(g.a,{edge:"start",className:i.menuButton,color:"inherit","aria-label":"menu",onClick:k,children:Object(a.jsx)(C.a,{})})}):null,Object(a.jsx)(M,{user:t,drawerOpen:h,toggleDrawer:k,handleLogOut:F}),Object(a.jsx)("div",{className:i.title,children:Object(a.jsx)("img",{src:"/odinbook_frontend/odinbook-logo.png",height:"40px",width:"160px",onClick:function(){t?c.push("/"):c.push("/login")}})}),t&&Object(a.jsx)("div",{children:Object(a.jsxs)(_.a,{mdDown:!0,children:[Object(a.jsx)(g.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){d(e.currentTarget)},color:"inherit",children:Object(a.jsx)(w.a,{})}),Object(a.jsxs)(y.a,{id:"menu-appbar",anchorEl:l,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:x,onClose:v,children:[Object(a.jsx)(N.a,{onClick:function(){c.push("/users/".concat(t.id)),v()},children:"Profile"}),Object(a.jsx)(N.a,{onClick:function(){c.push("/account"),v()},children:"Account"}),Object(a.jsx)(N.a,{onClick:F,children:"Log out"})]})]})})]})})})},V=n(41),Y=n(286),Q=n(87),X=n(285),Z=n(298),$=n(284),ee=n(227),te=Object(x.a)((function(e){return{root:{"& .MuiTextField-root":{margin:e.spacing(1),width:"182px"}},paper:{position:"absolute",width:400,backgroundColor:"white",boxShadow:e.shadows[5],padding:e.spacing(2,4,3),outline:"none",borderRadius:5},modalStyle:{top:"50%",left:"50%",transform:"translate(-50%, -50%)"},textField:{border:"1px solid rgb(204, 208, 213)",borderRadius:5},longTextField:{width:"380px"}}})),ne=function(e){var t=Object(r.useState)(""),n=Object(j.a)(t,2),i=n[0],c=n[1],s=Object(r.useState)(""),o=Object(j.a)(s,2),l=o[0],d=o[1],u=Object(r.useState)(""),b=Object(j.a)(u,2),m=b[0],h=b[1],p=Object(r.useState)(""),x=Object(j.a)(p,2),f=x[0],O=x[1],g=te();return Object(a.jsx)("div",{children:Object(a.jsx)(ee.a,{open:e.open,onClose:e.toggle,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",children:Object(a.jsxs)("div",{className:"".concat(g.root," ").concat(g.paper," ").concat(g.modalStyle),children:[Object(a.jsx)(Q.a,{variant:"h4",children:"Sign up"}),Object(a.jsx)(Q.a,{variant:"body1",style:{marginBottom:10},children:"It's quick and easy."}),Object(a.jsx)(q.a,{}),Object(a.jsxs)("div",{style:{marginTop:10},children:[Object(a.jsx)(Z.a,{required:!0,id:"firstNameInput",placeholder:"First name",variant:"outlined",className:"".concat(g.textField),onChange:function(e){return c(e.target.value)},value:i}),Object(a.jsx)(Z.a,{required:!0,id:"lastNameInput",placeholder:"Last name",variant:"outlined",className:"".concat(g.textField),onChange:function(e){return d(e.target.value)},value:l}),Object(a.jsx)(Z.a,{id:"emailInput",placeholder:"Email",variant:"outlined",style:{width:"380px"},className:"".concat(g.textField," ").concat(g.longTextField),onChange:function(e){return h(e.target.value)},value:m}),Object(a.jsx)(Z.a,{id:"passwordInput",placeholder:"New password",variant:"outlined",fullWidth:!0,style:{width:"380px"},type:"password",className:"".concat(g.textField," ").concat(g.longTextField),onChange:function(e){return O(e.target.value)},value:f}),e.signupErrors?e.signupErrors.map((function(e){return Object(a.jsx)("div",{style:{color:"red",display:"block",width:"100%"},children:e.msg})})):null,Object(a.jsx)("div",{style:{display:"flex",justifyContent:"center",marginTop:20},children:Object(a.jsx)($.a,{variant:"contained",style:{backgroundColor:"rgb(72,182,54)",width:"50%",color:"white",margin:"0 auto"},onClick:function(){e.handleSignUp(i,l,m,f),c(""),d(""),h(""),O("")},children:"Sign Up"})})]})]})})})},ae=n(162),re=n.n(ae),ie=n(163),ce=n.n(ie),se=function(e){var t=e.handleFBLogin;return Object(a.jsx)("div",{style:{width:"100%",margin:"0 8px 8px 8px"},children:Object(a.jsx)(re.a,{appId:Object({NODE_ENV:"production",PUBLIC_URL:"/odinbook_frontend",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FACEBOOK_APP_ID:"453747755614035",REACT_APP_FACEBOOK_APP_SECRET:"c77826123723d5acd7090148e449a4a0",REACT_APP_BASE_URL:"https://odinbook-react.herokuapp.com/api"}).FACEBOOK_APP_ID,fields:"name,email,picture",onClick:function(){},callback:function(e){t(e.accessToken)},render:function(e){return Object(a.jsx)($.a,{onClick:e.onClick,variant:"contained",color:"secondary",style:{width:"100%"},startIcon:Object(a.jsx)(ce.a,{}),children:"Log in with Facebook"})}})})},oe=Object(x.a)((function(e){return{root:{display:"flex",flexWrap:"wrap",backgroundColor:"white",padding:"10px",borderRadius:8,boxShadow:"1px 1px 20px 0px rgba(194,194,194,1)"},textField:{width:"100%"},button:{width:"100%",margin:8},fbButton:{display:"flex",justifyContent:"center",width:"100%",heigh:"100px"}}})),le=function(e){var t=Object(r.useState)(""),n=Object(j.a)(t,2),i=n[0],c=n[1],s=Object(r.useState)(""),o=Object(j.a)(s,2),l=o[0],d=o[1],u=Object(r.useState)(null),b=Object(j.a)(u,2),m=(b[0],b[1],oe()),h=function(){e.setModalOpen(!e.modalOpen)},p=function(e){"Enter"===e.key&&x()},x=function(){e.handleLogIn(i,l),c(""),d("")};return Object(a.jsxs)("div",{className:m.root,children:[Object(a.jsx)(ne,{open:e.modalOpen,toggle:h,handleSignUp:e.handleSignUp,signupErrors:e.signupErrors}),Object(a.jsx)(Z.a,{className:m.textField,id:"email-input",style:{margin:8,width:"100%"},placeholder:"Email",fullWidth:!0,margin:"normal",variant:"outlined",onChange:function(e){return c(e.target.value)},value:i,onKeyPress:p,required:!0}),Object(a.jsx)(Z.a,{className:m.textField,id:"password-input",style:{margin:8,width:"100%"},placeholder:"Password",fullWidth:!0,margin:"normal",variant:"outlined",type:"password",onChange:function(e){return d(e.target.value)},value:l,onKeyPress:p,required:!0}),e.errors?e.errors.map((function(e){return Object(a.jsx)("div",{style:{color:"red",display:"block",width:"100%"},children:e.msg})})):null,Object(a.jsx)($.a,{variant:"contained",color:"secondary",className:m.button,onClick:x,children:"Log In"}),Object(a.jsx)(q.a,{}),Object(a.jsx)($.a,{variant:"contained",className:m.button,style:{backgroundColor:"rgb(72,182,54)",color:"white"},onClick:h,children:"Create New Account"}),Object(a.jsx)($.a,{variant:"contained",className:m.button,style:{backgroundColor:"orange",color:"white"},onClick:e.handleTestDriveLogin,children:"Test drive an existing account"}),Object(a.jsx)("div",{style:{display:"flex",justifyContent:"center",width:"100%",marginTop:"8px"},children:Object(a.jsx)(se,{handleFBLogin:e.handleFBLogin})})]})},de=Object(x.a)((function(e){return{root:{flexGrow:1,margin:"10% 10%",height:"100%"},logInContainer:{height:"100vh",backgroundColor:"rgb(240,242,245)",paddingTop:"8%"}}})),ue=function(e){var t=e.user,n=e.setUser,i=Object(b.f)(),c=de(),s=Object(r.useState)([]),o=Object(j.a)(s,2),l=o[0],d=o[1],u=Object(r.useState)([]),m=Object(j.a)(u,2),p=m[0],x=m[1],f=Object(r.useState)(!1),O=Object(j.a)(f,2),g=O[0],v=O[1];return t&&i.push("/"),Object(a.jsx)(X.a,{maxWidth:"xl",className:c.logInContainer,children:Object(a.jsx)("div",{className:c.root,children:Object(a.jsxs)(Y.a,{container:!0,spacing:3,children:[Object(a.jsxs)(Y.a,{item:!0,xs:12,md:6,children:[Object(a.jsx)("div",{style:{display:"flex",justifyContent:"flex-start",marginTop:"10%"},children:Object(a.jsx)("img",{src:"/odinbook_frontend/odinbook-logo-blue.png",height:"50px",width:"200px"})}),Object(a.jsx)(Q.a,{variant:"h6",style:{textAlign:"left",margin:"0 30px 0 15px"},children:"Connect with friends and the world around you on Odinbook."})]}),Object(a.jsx)(Y.a,{item:!0,xs:12,md:6,children:Object(a.jsx)(le,{handleLogIn:function(e,t){h.post("/auth/login",{email:e,password:t}).then((function(e){var t={email:e.data.user.email,first_name:e.data.user.first_name,last_name:e.data.user.last_name,token:e.data.token.token,id:e.data.user.id,profilePicUrl:e.data.user.profilePicUrl};h.defaults.headers.common.Authorization=e.data.token.token,n(t),i.push("/")})).catch((function(e){e.response.data.errors?(d(e.response.data.errors),setTimeout((function(){d([])}),3e3)):e.response.data.message&&(d([].concat(Object(V.a)(l),[{msg:e.response.data.message}])),setTimeout((function(){d([])}),3e3))}))},handleSignUp:function(e,t,a,r){h.post("/auth/signup",{firstName:e,lastName:t,email:a,password:r}).then((function(e){var t={email:e.data.user.email,first_name:e.data.user.first_name,last_name:e.data.user.last_name,token:e.data.token.token,id:e.data.user.id,profilePicUrl:e.data.user.profilePicUrl};h.defaults.headers.common.Authorization=e.data.token.token,n(t),v(!1),i.push("/")})).catch((function(e){e.response.data.errors?(x(e.response.data.errors),setTimeout((function(){x([])}),3e3)):e.response.data.message&&(x([].concat(Object(V.a)(p),[{msg:e.response.data.message}])),setTimeout((function(){x([])}),3e3))}))},handleFBLogin:function(e){h.defaults.headers.common.Authorization="Bearer ".concat(e),h.post("/auth/facebook/token").then((function(t){var a={email:t.data.user.email,first_name:t.data.user.first_name,last_name:t.data.user.last_name,token:"Bearer ".concat(e),id:t.data.user.id,profilePicUrl:t.data.user.profilePicUrl,facebookId:t.data.user.facebookId};n(a),i.push("/")}))},handleTestDriveLogin:function(){h.post("/auth/testdrive").then((function(e){var t={email:e.data.user.email,first_name:e.data.user.first_name,last_name:e.data.user.last_name,token:e.data.token.token,id:e.data.user.id,profilePicUrl:e.data.user.profilePicUrl,facebookId:e.data.user.facebookId};h.defaults.headers.common.Authorization=e.data.token.token,n(t),i.push("/")}))},errors:l,signupErrors:p,modalOpen:g,setModalOpen:v})})]})})})},je=n(135),be=n(106),me=n.n(be),he=Object(x.a)((function(e){return{root:{display:"flex",flexWrap:"wrap",marginRight:15},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),color:"white"},textFieldLabel:{color:"white"},buttonContainer:{width:"100%"},button:{color:"white",borderColor:"white",marginTop:10,width:"100%"},dangerButton:{borderColor:"rgb(242,16,90)",color:"rgb(242,16,90)",marginTop:10,width:"100%"}}})),pe=function(e){e.imageFile;var t=e.imgPreview,n=e.setImageFile,r=e.setImgPreview,i=e.handleSubmit,c=he();return Object(a.jsxs)("div",{className:c.root,children:[t?Object(a.jsx)("div",{style:{width:"100%"},children:Object(a.jsx)("img",{src:t,width:"100%"})}):Object(a.jsx)(Z.a,{id:"img-file",name:"img-file",onChange:function(e){return function(e){n(e.target.files[0]),r(URL.createObjectURL(e.target.files[0]))}(e)},style:{margin:8},fullWidth:!0,margin:"normal",InputProps:{className:c.textField},InputLabelProps:{shrink:!0,className:c.textFieldLabel},variant:"outlined",className:c.textField,type:"file"}),Object(a.jsxs)("div",{className:c.buttonContainer,children:[Object(a.jsx)($.a,{variant:"outlined",className:c.button,type:"submit",onClick:i,children:"Submit"}),Object(a.jsx)($.a,{variant:"outlined",className:c.dangerButton,type:"reset",onClick:function(){n(null),r(null)},children:"Cancel"})]})]})},xe=Object(x.a)((function(e){return{root:{display:"flex",flexDirection:"column",alignItems:"center","& > *":{margin:e.spacing(1)}},textFieldContainer:{display:"flex",flexDirection:"row",alignItems:"center",width:"100%","& > *":{margin:e.spacing(1)}},textField:{backgroundColor:"rgb(51,52,52)",color:"white",width:"100%",borderRadius:10},buttonContainer:{width:"100%",margin:e.spacing(1),justifyContent:"flex-end"},button:{width:"100%",color:"white",borderColor:"white"}}})),fe=function(e){var t=e.user,n=e.handlePostSubmit,i=Object(r.useState)(""),c=Object(j.a)(i,2),s=c[0],o=c[1],l=Object(r.useState)(!1),d=Object(j.a)(l,2),u=d[0],b=d[1],m=Object(r.useState)(null),h=Object(j.a)(m,2),p=h[0],x=h[1],f=Object(r.useState)(null),O=Object(j.a)(f,2),g=O[0],v=O[1],C=xe(),k=function(){n(s,p),o(""),b(!1),x(null),v(null)};return t?Object(a.jsxs)("div",{className:C.root,children:[Object(a.jsxs)("div",{className:C.textFieldContainer,children:[Object(a.jsx)(z,{user:t}),Object(a.jsx)(Z.a,{placeholder:"What's on your mind, ".concat(t.first_name,"?"),variant:"outlined",className:C.textField,InputProps:{className:C.textField},onKeyPress:function(e){"Enter"===e.key&&k()},onChange:function(e){return o(e.target.value)},value:s})]}),u?Object(a.jsx)(pe,{imageFile:p,imgPreview:g,setImageFile:x,setImgPreview:v,handleSubmit:k}):Object(a.jsx)("div",{className:C.buttonContainer,children:Object(a.jsx)($.a,{variant:"outlined",className:C.button,startIcon:Object(a.jsx)(me.a,{}),onClick:function(){b(!u)},children:"Add Image"})})]}):Object(a.jsx)("div",{className:"loader",children:"Loading..."})},Oe=n(175),ge=n(107),ve=n.n(ge),Ce=n(164),ke=n.n(Ce),we=Object(x.a)((function(e){return{root:{display:"flex",textAlign:"left",marginTop:20},contentContainer:{marginLeft:10},authorInfo:{fontWeight:"bold"},comment:{}}})),Ne=function(e){var t=e.comment,n=e.handleLikeComment,r=e.postId,i=we();return Object(a.jsxs)("div",{className:i.root,children:[Object(a.jsx)(z,{user:t.user}),Object(a.jsxs)("div",{className:i.contentContainer,children:[Object(a.jsx)(Q.a,{variant:"body2",className:i.authorInfo,children:"".concat(t.user.first_name," ").concat(t.user.last_name)}),Object(a.jsx)(Q.a,{variant:"body2",className:i.comment,children:t.comment}),Object(a.jsxs)("div",{style:{display:"flex",alignItems:"center",marginTop:5},children:[Object(a.jsx)(g.a,{"aria-label":"like comment",size:"small",style:{marginRight:5},onClick:function(){return n(r,t._id)},children:Object(a.jsx)(ve.a,{fontSize:"inherit",style:{color:"white"}})}),Object(a.jsx)(Q.a,{variant:"body2",className:i.comment,children:"".concat(t.likes.length)})]})]})]})},ye=Object(x.a)((function(e){return{root:{display:"flex",alignItems:"center","& > *":{margin:e.spacing(1)}},textField:{backgroundColor:"rgb(51,52,52)",color:"white",width:"100%",borderRadius:10,height:"50px"}}})),_e=function(e){var t=e.postId,n=e.user,i=e.handleCommentSubmit,c=Object(r.useState)(""),s=Object(j.a)(c,2),o=s[0],l=s[1],d=ye();return n?Object(a.jsxs)("div",{className:d.root,children:[Object(a.jsx)(z,{user:n}),Object(a.jsx)(Z.a,{placeholder:"Write your comment...",variant:"outlined",className:d.textField,InputProps:{className:d.textField},onKeyPress:function(e){"Enter"===e.key&&(i(t,o),l(""))},onChange:function(e){return l(e.target.value)},value:o})]}):Object(a.jsx)("div",{className:"loader",children:"Loading..."})},Fe=function(e){var t=e.post,n=e.showCommentForm,r=e.user,i=e.handleCommentSubmit,c=e.handleLikeComment;return Object(a.jsxs)("div",{children:[t.comments.map((function(e){return Object(a.jsx)(Ne,{comment:e,handleLikeComment:c,postId:t._id},e._id)})),n?Object(a.jsx)(_e,{user:r,handleCommentSubmit:i,postId:t._id}):null]})},Se=Object(x.a)((function(e){return{root:{display:"flex",flexDirection:"column","& > *":{margin:e.spacing(1)}},postAuthorInfoContainer:{display:"flex",flexDirection:"row",justifyContent:"flex-start"},postAuthorName:{textAlign:"left",fontWeight:"bold",cursor:"pointer"},postTime:{textAlign:"left"},postContent:{display:"flex",justifyContent:"flex-start",textAlign:"left"},button:{width:"calc(50% - 20px)",margin:"0 10px",color:"white",backgroundColor:"rgb(32,33,34)"},buttonIcon:{color:"white",marginRight:10}}})),Pe=function(e){var t=e.user,n=e.post,i=e.handleCommentSubmit,c=e.handleLikePost,s=e.handleLikeComment,o=Object(r.useState)(!1),l=Object(j.a)(o,2),d=l[0],u=l[1],m=Se(),h=Object(b.f)();return Object(a.jsxs)("div",{className:m.root,children:[Object(a.jsxs)("div",{className:m.postAuthorInfoContainer,children:[Object(a.jsx)(z,{user:n.author}),Object(a.jsxs)("div",{style:{flexDirection:"column",marginLeft:15},children:[Object(a.jsx)(Q.a,{className:m.postAuthorName,variant:"body1",onClick:function(){h.push("/users/".concat(n.author._id))},children:"".concat(n.author.first_name," ").concat(n.author.last_name)}),Object(a.jsx)(Q.a,{className:m.postTime,variant:"body2",children:Object(Oe.a)(new Date(n.timestamp),new Date,{addSuffix:!0})})]})]}),Object(a.jsx)("div",{children:Object(a.jsx)(Q.a,{className:m.postContent,variant:"body1",children:n.content})}),Object(a.jsx)("div",{children:n.imgUrl&&Object(a.jsx)("img",{src:n.imgUrl,width:"100%"})}),Object(a.jsx)(Q.a,{className:m.postTime,variant:"body2",children:1===n.likes.length?"1 like":"".concat(n.likes.length," likes")}),Object(a.jsx)(q.a,{}),Object(a.jsxs)("div",{className:m.buttonContainer,children:[Object(a.jsx)($.a,{variant:"outlined",className:m.button,startIcon:Object(a.jsx)(ve.a,{className:m.buttonIcon}),onClick:function(){return c(n._id)},children:"Like"}),Object(a.jsx)($.a,{variant:"outlined",className:m.button,startIcon:Object(a.jsx)(ke.a,{className:m.buttonIcon}),onClick:function(){u(!d)},children:"Comment"})]}),Object(a.jsx)(q.a,{}),Object(a.jsx)(Fe,{post:n,showCommentForm:d,user:t,handleCommentSubmit:i,handleLikeComment:s})]})},Ie=Object(x.a)((function(e){return{root:{height:"100vh",overflowY:"scroll","&::-webkit-scrollbar":{display:"none"},"&-ms-overflow-style":"none","scrollbar-width":"none"},paper:{padding:e.spacing(2),textAlign:"center",backgroundColor:"rgb(32,33,34)",color:"white",margin:"0 0px 20px 0px"},noPost:{color:"white"}}})),Re=function(e){var t=e.user,n=e.posts,r=e.handleCommentSubmit,i=e.handleLikePost,c=e.handleLikeComment,s=e.handleScroll,o=e.loadingPosts,l=Ie();return o?Object(a.jsx)("div",{className:"loader",children:"Loading..."}):n.length?Object(a.jsx)("div",{onScroll:s,className:l.root,children:n.map((function(e){return Object(a.jsx)(je.a,{className:l.paper,children:Object(a.jsx)(Pe,{post:e,user:t,handleCommentSubmit:r,handleLikePost:i,handleLikeComment:c})},e._id)}))}):Object(a.jsx)(je.a,{className:l.paper,children:Object(a.jsx)("div",{className:l.noPost,children:"No posts here..."})})},qe=Object(x.a)((function(e){return{root:{width:"100%",maxWidth:360,backgroundColor:"rgb(32,33,34)"}}})),Le=function(e){var t=e.user,n=Object(b.f)(),r=qe(),i=function(e){n.push(e)};return Object(a.jsx)("div",{className:r.root,children:Object(a.jsxs)(S.a,{component:"nav","aria-label":"main nav list",children:[Object(a.jsxs)(P.a,{button:!0,onClick:function(){return i("/users/".concat(t.id))},children:[Object(a.jsx)(I.a,{children:Object(a.jsx)(z,{user:t})}),Object(a.jsx)(R.a,{primary:"".concat(t.first_name," ").concat(t.last_name)})]}),Object(a.jsx)(q.a,{}),Object(a.jsxs)(P.a,{button:!0,children:[Object(a.jsx)(I.a,{children:Object(a.jsx)(A.a,{})}),Object(a.jsx)(R.a,{primary:"Friends",onClick:function(){return i("/friends")}})]}),Object(a.jsx)(q.a,{}),Object(a.jsxs)(P.a,{button:!0,children:[Object(a.jsx)(I.a,{children:Object(a.jsx)(U.a,{})}),Object(a.jsx)(R.a,{primary:"Account",onClick:function(){return i("/account")}})]})]})})},Ae=n(287),Te=n(288),Ue=n(108),Ee=n.n(Ue),De=n(109),Be=n.n(De),We=Object(x.a)((function(e){return{root:{width:"100%",maxWidth:360,backgroundColor:"rgb(32,33,34)",textAlign:"left"},tickIcon:{color:"green"},crossIcon:{color:"red"},subheader:{color:"white"}}})),Ke=function(e){var t=e.friends,n=e.friendRequests,r=e.handleAcceptRequest,i=e.handleDeclineRequest,c=We(),s=Object(b.f)(),o=function(e){s.push("/users/".concat(e))};return Object(a.jsxs)("div",{className:c.root,children:[Object(a.jsx)(S.a,{component:"nav","aria-label":"friend requests list",subheader:Object(a.jsx)(Ae.a,{className:c.subheader,children:"Friend Requests"}),children:n.slice(0,3).map((function(e,t){return Object(a.jsxs)("div",{children:[Object(a.jsxs)(P.a,{button:!0,onClick:function(){return o(e._id)},children:[Object(a.jsx)(I.a,{children:Object(a.jsx)(z,{user:e})}),Object(a.jsx)(R.a,{primary:"".concat(e.first_name," ").concat(e.last_name)}),Object(a.jsxs)(Te.a,{children:[Object(a.jsx)(g.a,{edge:"end","aria-label":"comments",onClick:function(){return r(e._id)},children:Object(a.jsx)(Ee.a,{className:c.tickIcon})}),Object(a.jsx)(g.a,{edge:"end","aria-label":"comments",onClick:function(){return i(e._id)},children:Object(a.jsx)(Be.a,{className:c.crossIcon})})]})]}),n[t+1]?Object(a.jsx)(q.a,{}):null]},e._id)}))}),Object(a.jsx)(S.a,{component:"nav","aria-label":"[top] friends list",subheader:Object(a.jsx)(Ae.a,{className:c.subheader,children:"Friends"}),children:t.map((function(e,n){return Object(a.jsxs)("div",{children:[Object(a.jsxs)(P.a,{button:!0,onClick:function(){return o(e._id)},children:[Object(a.jsx)(I.a,{children:Object(a.jsx)(z,{user:e})}),Object(a.jsx)(R.a,{primary:"".concat(e.first_name," ").concat(e.last_name)})]}),t[n+1]?Object(a.jsx)(q.a,{}):null]},e._id)}))})]})},ze=n(134),He=n.n(ze),Me=n(165),Ge=function(e){return e.sort((function(e,t){return new Date(t.timestamp)-new Date(e.timestamp)}))},Je=function(e){var t=e.posts,n=e.setPosts,a=e.user,r=e.skip,i=e.setLoadingPosts,c=(e.userFriends,e.setUserFriends),s=e.friendRequests,o=e.setFriendRequests;return{getPosts:function(){0===r&&i(!0),h.get("/posts/?skip=".concat(r),{data:{skip:r}}).then((function(e){n(Ge([].concat(Object(V.a)(t),Object(V.a)(e.data.posts)))),0===r&&i(!1)}))},handlePostSubmit:function(){var e=Object(Me.a)(He.a.mark((function e(a,r){var i,c,s,o;return He.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=13;break}return(i=new FormData).append("img-file",r),e.next=5,h.post("/posts",{content:a});case 5:return c=e.sent,e.next=8,h.put("/posts/".concat(c.data.post._id),i);case 8:s=e.sent,o=[].concat(Object(V.a)(t),[s.data.post]),n(Ge(o)),e.next=14;break;case 13:h.post("/posts",{content:a}).then((function(e){var a=[].concat(Object(V.a)(t),[e.data.post]);n(Ge(a))}));case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),handleLikePost:function(e){h.put("/posts/".concat(e,"/like")).then((function(r){var i=Object(V.a)(t),c=i.findIndex((function(t){return t._id==e}));i[c].likes.includes(a.id)?i[c].likes=i[c].likes.filter((function(e){return e!=a.id})):i[c].likes.push(a.id),n(Ge(i))}))},handleCommentSubmit:function(e,a){h.post("/posts/".concat(e,"/comments"),{comment:a}).then((function(a){var r=Object(V.a)(t),i=r.findIndex((function(t){return t._id==e}));r[i].comments=[].concat(Object(V.a)(r[i].comments),[a.data.comment]),n(Ge(r))}))},handleLikeComment:function(e,r){h.put("/posts/".concat(e,"/comments/").concat(r,"/like")).then((function(i){var c=Object(V.a)(t),s=c.findIndex((function(t){return t._id==e})),o=c[s].comments.findIndex((function(e){return e._id==r}));c[s].comments[o].likes.includes(a.id)?c[s].comments[o].likes=c[s].comments[o].likes.filter((function(e){return e!=a.id})):c[s].comments[o].likes.push(a.id),n(Ge(c))}))},handleAcceptRequest:function(e){h.put("/users/friends/accept",{relUserId:e}).then((function(t){c(t.data.user.friends);var n=s.filter((function(t){return t._id!=e}));o(n)}))},handleDeclineRequest:function(e){h.delete("/users/friends/decline",{data:{relUserId:e}}).then((function(t){var n=s.filter((function(t){return t._id!=e}));o(n)}))}}},Ve=Object(x.a)((function(e){return{container:{backgroundColor:"rgb(23, 24, 25)",minHeight:"100vh",marginTop:"10px"},grid:{justifyContent:"center"},paper:{padding:e.spacing(2),textAlign:"center",backgroundColor:"rgb(32,33,34)",color:"white",marginBottom:20}}})),Ye=function(e){var t=e.user,n=e.setUser,i=Object(r.useState)([]),c=Object(j.a)(i,2),s=c[0],o=c[1],l=Object(r.useState)(!1),d=Object(j.a)(l,2),u=d[0],m=d[1],p=Object(r.useState)([]),x=Object(j.a)(p,2),f=x[0],O=x[1],g=Object(r.useState)([]),v=Object(j.a)(g,2),C=v[0],k=v[1],w=Object(r.useState)(0),N=Object(j.a)(w,2),y=N[0],F=N[1],S=Ve(),P=Object(b.f)();t||P.push("/login");var I=Je({posts:s,setPosts:o,user:t,skip:y,setLoadingPosts:m,userFriends:f,setUserFriends:O,friendRequests:C,setFriendRequests:k}),R=I.getPosts,q=I.handlePostSubmit,L=I.handleLikePost,A=I.handleCommentSubmit,T=I.handleLikeComment,U=I.handleAcceptRequest,E=I.handleDeclineRequest;Object(r.useEffect)((function(){R()}),[y]),Object(r.useEffect)((function(){t&&h.get("/users/".concat(t.id)).then((function(e){O(e.data.user.friends),k(e.data.user.friendRequests)})).catch((function(e){!e.response||500!==e.response.status&&401!==e.response.status||(n(""),P.push("/login"))}))}),[t]);return Object(a.jsx)(X.a,{maxWidth:"xl",className:S.container,children:Object(a.jsx)("div",{children:Object(a.jsxs)(Y.a,{container:!0,spacing:3,className:S.grid,children:[Object(a.jsx)(_.a,{mdDown:!0,children:Object(a.jsx)(Y.a,{item:!0,md:3,children:Object(a.jsx)(je.a,{className:S.paper,children:Object(a.jsx)(Le,{user:t})})})}),Object(a.jsxs)(Y.a,{item:!0,xs:12,md:6,children:[Object(a.jsx)(je.a,{className:S.paper,children:Object(a.jsx)(fe,{user:t,handlePostSubmit:q})}),Object(a.jsx)(Re,{user:t,posts:s,handleCommentSubmit:A,handleLikePost:L,handleLikeComment:T,handleScroll:function(e){e.target.scrollHeight-e.target.scrollTop===e.target.clientHeight&&F(s.length)},loadingPosts:u})]}),Object(a.jsx)(_.a,{mdDown:!0,children:Object(a.jsx)(Y.a,{item:!0,md:3,children:Object(a.jsx)(je.a,{className:S.paper,children:Object(a.jsx)(Ke,{friends:f,friendRequests:C,handleAcceptRequest:U,handleDeclineRequest:E})})})})]})})})},Qe=n(62),Xe=n(32),Ze=n(110),$e=n.n(Ze),et=n(170),tt=n.n(et),nt=n(168),at=n.n(nt),rt=n(166),it=n.n(rt),ct=n(169),st=n.n(ct),ot=n(167),lt=n.n(ot),dt=Object(x.a)((function(e){return{button:{color:"white",borderColor:"white",margin:"10px 10px"},dangerButton:{marginTop:10,borderColor:"rgb(242,16,90)",color:"rgb(242,16,90)",margin:"10px 10px"}}})),ut=function(e){var t=e.user,n=e.friendsArr,r=e.friendReqsArr,i=e.loggedInUser,c=e.handleRemoveFriend,s=e.handleCancelFriendReq,o=e.handleFriendReq,l=e.receivedReqs,d=e.acceptFriendReq,u=e.declineFriendReq,j=dt();return Object(a.jsx)("div",{children:n.includes(i.id)?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)($.a,{variant:"outlined",className:j.button,startIcon:Object(a.jsx)(it.a,{}),children:"Friend"}),Object(a.jsx)($.a,{variant:"outlined",className:j.dangerButton,startIcon:Object(a.jsx)(lt.a,{}),onClick:function(){return c(t._id)},children:"Remove friend"})]}):r.includes(i.id)?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)($.a,{variant:"outlined",className:j.button,startIcon:Object(a.jsx)(at.a,{}),children:"Friend Request Sent"}),Object(a.jsx)($.a,{variant:"outlined",className:j.dangerButton,startIcon:Object(a.jsx)(st.a,{}),onClick:function(){return s(t._id)},children:"Cancel friend request"})]}):l.includes(t._id)?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)($.a,{variant:"outlined",className:j.button,style:{color:"green",borderColor:"green",width:"45%"},startIcon:Object(a.jsx)(Ee.a,{}),onClick:function(){return d(t._id)},children:"Accept Friend Request"}),Object(a.jsx)($.a,{variant:"outlined",className:j.dangerButton,style:{width:"45%"},startIcon:Object(a.jsx)(Be.a,{}),onClick:function(){return u(t._id)},children:"Decline Friend Request"})]}):Object(a.jsx)($.a,{variant:"outlined",className:j.button,startIcon:Object(a.jsx)(tt.a,{}),onClick:function(){return o(t._id)},children:"Send Friend Request"})})},jt=Object(x.a)((function(e){return{root:{color:"white",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},avatarContainer:{borderRadius:"50%",height:"150px",width:"150px",border:"1px solid rgb(32,33,34)"},avatar:{overflow:"hidden",borderRadius:"50%",height:"150px",width:"150px"},textContainer:{marginTop:20},button:{color:"white",borderColor:"white",margin:"10px 10px"}}})),bt=function(e){var t=e.user,n=e.loggedInUser,i=e.handleFriendReq,c=e.handleCancelFriendReq,s=e.handleRemoveFriend,o=e.toggleEditProfile,l=e.toggleEditImage,d=Object(r.useState)([]),u=Object(j.a)(d,2),m=u[0],p=u[1],x=Object(r.useState)([]),f=Object(j.a)(x,2),O=f[0],g=f[1],v=Object(r.useState)([]),C=Object(j.a)(v,2),k=C[0],w=C[1],N=jt(),y=Object(b.f)(),_=Je({userFriends:m,setUserFriends:p,friendRequests:k,setFriendRequests:w}),F=_.handleAcceptRequest,S=_.handleDeclineRequest;Object(r.useEffect)((function(){var e=t.friends.map((function(e){return e._id})),n=t.friendRequests.map((function(e){return e._id}));p(e),g(n)}),[t]),Object(r.useEffect)((function(){h.get("/users/".concat(n.id)).then((function(e){var t=e.data.user.friendRequests.map((function(e){return e._id}));w(t)}))}),[]);return Object(a.jsxs)("div",{className:N.root,children:[Object(a.jsx)("div",{className:N.avatarContainer,children:Object(a.jsx)("img",{src:t.profilePicUrl,className:N.avatar})}),Object(a.jsxs)("div",{className:N.textContainer,children:[Object(a.jsx)(Q.a,{variant:"h5",children:"".concat(t.first_name," ").concat(t.last_name)}),t._id!=n.id?Object(a.jsx)(ut,{user:t,friendsArr:m,friendReqsArr:O,loggedInUser:n,handleRemoveFriend:s,handleCancelFriendReq:c,handleFriendReq:i,receivedReqs:k,acceptFriendReq:function(e){F(e),y.push("/temp"),y.goBack()},declineFriendReq:function(e){S(e),y.push("/temp"),y.goBack()}}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)($.a,{variant:"outlined",className:N.button,startIcon:Object(a.jsx)($e.a,{}),onClick:o,children:"Edit Profile"}),Object(a.jsx)($.a,{variant:"outlined",className:N.button,startIcon:Object(a.jsx)(me.a,{}),onClick:l,children:"Edit Profile Photo"})]})]})]})},mt=n(70),ht=n(65),pt=n(178),xt=Object(x.a)((function(e){return{textField:{color:"white"},textFieldLabel:{color:"white"}}})),ft=function(e){var t=e.formikKey,n=Object(pt.a)(e,["formikKey"]),r=xt(),i=Object(mt.c)(t),c=Object(j.a)(i,3),s=c[0],o=c[1];c[2];return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(Z.a,Object(Qe.a)(Object(Qe.a)({id:s.name,name:s.name,helperText:o.touched?o.error:"",error:o.touched&&Boolean(o.error),value:s.value,onChange:s.onChange},n),{},{style:{margin:8},fullWidth:!0,margin:"normal",InputProps:{className:r.textField},InputLabelProps:{shrink:!0,className:r.textFieldLabel},variant:"outlined",className:r.textField}))})},Ot=Object(x.a)((function(e){return{root:{display:"flex",flexWrap:"wrap",marginRight:15},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),color:"white"},textFieldLabel:{color:"white"},button:{color:"white",borderColor:"white",margin:"10px 10px"},dangerButton:{borderColor:"rgb(242,16,90)",color:"rgb(242,16,90)",margin:"10px 10px"}}})),gt=ht.a().shape({firstName:ht.c().min(2,"Too Short!").max(50,"Too Long!").required("Required"),lastName:ht.c().min(2,"Too Short!").max(50,"Too Long!").required("Required"),email:ht.c().email("Invalid email").required("Required"),password:ht.c().required("Password is required"),confirmPassword:ht.c().oneOf([ht.b("password"),null],"Passwords must match").required("Confirm password is required")}),vt=function(e){var t=e.user,n=e.toggleEditProfile,r=e.handleUpdateProfile,i=Ot();return Object(a.jsxs)("div",{className:i.root,children:[Object(a.jsx)(Q.a,{variant:"h6",style:{margin:"10px 8px"},children:"Edit Profile"}),Object(a.jsx)(mt.b,{initialValues:{firstName:t.first_name,lastName:t.last_name,email:t.email,password:"",confirmPassword:""},validationSchema:gt,onSubmit:function(e,t){var a=t.resetForm;r(e),a(),n()},children:function(e){var t=e.handleChange,r=e.setFieldTouched,c=e.isValid,s=function(e,n){n.persist(),t(n),r(e,!0,!1)};return Object(a.jsxs)(mt.a,{children:[Object(a.jsx)(ft,{formikKey:"firstName",name:"firstName",type:"text",label:"First Name",onChange:function(e){return s("firstName",e)}}),Object(a.jsx)(ft,{formikKey:"lastName",name:"lastName",type:"text",label:"Last Name",onChange:function(e){return s("lastName",e)}}),Object(a.jsx)(ft,{formikKey:"email",name:"email",type:"email",label:"Email",onChange:function(e){return s("email",e)}}),Object(a.jsx)(ft,{formikKey:"password",name:"password",type:"password",label:"Password",onChange:function(e){return s("password",e)}}),Object(a.jsx)(ft,{formikKey:"confirmPassword",name:"confirmPassword",type:"password",label:"Confirm Password",onChange:function(e){return s("confirmPassword",e)}}),Object(a.jsx)($.a,{variant:"outlined",className:i.button,type:"submit",onClick:mt.b.handleSubmit,disabled:!c,children:"Save changes"}),Object(a.jsx)($.a,{variant:"outlined",className:i.dangerButton,type:"reset",onClick:n,children:"Cancel changes"})]})}})]})},Ct=Object(x.a)((function(e){return{root:{display:"flex",flexWrap:"wrap",marginRight:15},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),color:"white"},textFieldLabel:{color:"white"},button:{color:"white",borderColor:"white",margin:"10px 10px"},dangerButton:{borderColor:"rgb(242,16,90)",color:"rgb(242,16,90)",margin:"10px 10px"}}})),kt=function(e){e.user;var t=e.toggleEditImage,n=e.handleUpdateImage,i=Object(r.useState)(null),c=Object(j.a)(i,2),s=c[0],o=c[1],l=Ct();return Object(a.jsxs)("div",{className:l.root,children:[Object(a.jsx)(Q.a,{variant:"h6",style:{margin:"10px 8px"},children:"Update Image"}),Object(a.jsx)(Z.a,{id:"img-file",name:"img-file",onChange:function(e){return function(e){o(e.target.files[0])}(e)},style:{margin:8},fullWidth:!0,margin:"normal",InputProps:{className:l.textField},InputLabelProps:{shrink:!0,className:l.textFieldLabel},variant:"outlined",className:l.textField,type:"file"}),Object(a.jsx)($.a,{variant:"outlined",className:l.button,type:"submit",onClick:function(){return n(s)},children:"Save image"}),Object(a.jsx)($.a,{variant:"outlined",className:l.dangerButton,type:"reset",onClick:t,children:"Cancel"})]})},wt=Object(x.a)((function(e){var t;return{container:{backgroundColor:"rgb(23, 24, 25)",minHeight:"100vh",marginTop:"10px"},grid:(t={},Object(Xe.a)(t,e.breakpoints.down("md"),{justifyContent:"center"}),Object(Xe.a)(t,e.breakpoints.up("lg"),{justifyContent:"flex-start"}),t),paper:{padding:e.spacing(2),textAlign:"center",backgroundColor:"rgb(32,33,34)",color:"white",margin:"0 5px 20px 5px"}}})),Nt=function(e){var t,n=e.user,i=e.setUser,c=Object(r.useState)(null),s=Object(j.a)(c,2),o=s[0],l=s[1],d=Object(r.useState)([]),u=Object(j.a)(d,2),m=u[0],p=u[1],x=Object(r.useState)(!1),f=Object(j.a)(x,2),O=f[0],g=f[1],v=Object(r.useState)(!1),C=Object(j.a)(v,2),k=C[0],w=C[1],N=Object(r.useState)(!1),y=Object(j.a)(N,2),F=y[0],S=y[1],P=Object(r.useState)(0),I=Object(j.a)(P,2),R=I[0],q=I[1],L=wt(),A=Object(b.g)().userId,T=Object(b.f)(),U=Je({posts:m,setPosts:p,user:n,skip:R,setLoadingPosts:g}),E=U.getPosts,D=U.handlePostSubmit,B=U.handleLikePost,W=U.handleCommentSubmit,K=U.handleLikeComment;Object(r.useEffect)((function(){E()}),[R]),Object(r.useEffect)((function(){h.get("/users/".concat(A)).then((function(e){l(e.data.user)})).catch((function(e){500!==e.response.status&&401!==e.response.status||(i(""),T.push("/login"))}))}),[A]);var z=function(e){h.delete("/users/friends/remove",{data:{relUserId:e}}).then((function(e){l(e.data.user)}))},H=function(){w(!k)},M=function(){S(!F)};return o?Object(a.jsx)(X.a,{maxWidth:"xl",className:L.container,children:Object(a.jsxs)(Y.a,{container:!0,spacing:3,className:L.grid,children:[Object(a.jsx)(_.a,{mdDown:!0,children:Object(a.jsx)(Y.a,{item:!0,md:3,children:Object(a.jsx)(je.a,{className:L.paper,children:Object(a.jsx)(Le,{user:n})})})}),Object(a.jsx)(Y.a,{item:!0,xs:12,md:6,children:Object(a.jsx)(je.a,{className:L.paper,children:k?Object(a.jsx)(vt,{user:o,toggleEditProfile:H,handleUpdateProfile:function(e){h.put("/users/".concat(n.id),e).then((function(e){var t={email:e.data.user.email,first_name:e.data.user.first_name,last_name:e.data.user.last_name,token:e.data.token.token,id:e.data.user._id,profilePicUrl:e.data.user.profilePicUrl};i(t),l(e.data.user),h.defaults.headers.common.Authorization=e.data.token.token}))}}):F?Object(a.jsx)(kt,{user:o,toggleEditImage:M,handleUpdateImage:function(e){var t=new FormData;t.append("img-file",e),h.post("/users/".concat(n.id,"/profileimage"),t,{}).then((function(e){var t={email:e.data.user.email,first_name:e.data.user.first_name,last_name:e.data.user.last_name,token:n.token,id:e.data.user._id,profilePicUrl:e.data.user.profilePicUrl};i(t),l(e.data.user),M()}))}}):Object(a.jsx)(bt,(t={user:o,loggedInUser:n,handleFriendReq:function(e){h.post("/users/friends/req",{relUserId:e}).then((function(e){h.get("/users/".concat(A)).then((function(e){l(e.data.user)}))}))},handleRemoveFriend:z,handleCancelFriendReq:function(e){h.delete("/users/friends/cancel",{data:{relUserId:e}}).then((function(e){var t=Object(Qe.a)({},o),a=t.friendRequests.filter((function(e){return e._id!=n.id}));t.friendRequests=a,l(t)}))}},Object(Xe.a)(t,"handleRemoveFriend",z),Object(Xe.a)(t,"toggleEditProfile",H),Object(Xe.a)(t,"toggleEditImage",M),t))})}),Object(a.jsx)(Y.a,{container:!0,spacing:3,justify:"center",children:Object(a.jsxs)(Y.a,{item:!0,xs:12,md:6,children:[o._id===n.id?Object(a.jsx)(je.a,{className:L.paper,children:Object(a.jsx)(fe,{user:o,handlePostSubmit:D})}):null,Object(a.jsx)(Re,{user:o,posts:m.filter((function(e){return e.author._id==o._id})),handleCommentSubmit:W,handleLikePost:B,handleLikeComment:K,handleScroll:function(e){e.target.scrollHeight-e.target.scrollTop===e.target.clientHeight&&q(m.length)},loadingPosts:O})]})})]})}):Object(a.jsx)("div",{className:"loader",children:"Loading..."})},yt=n(289),_t=n(290),Ft=Object(x.a)((function(e){var t;return{root:{backgroundColor:"rgb(32,33,34)",display:"flex",alignItems:"center",cursor:"pointer"},friendName:{color:"white"},paper:(t={padding:e.spacing(2),textAlign:"center",backgroundColor:"rgb(32,33,34)",color:"white",margin:"20px 10px",width:"25%"},Object(Xe.a)(t,e.breakpoints.down("md"),{width:"40%"}),Object(Xe.a)(t,e.breakpoints.down("sm"),{width:"100%"}),t)}})),St=function(e){var t=e.friend,n=Ft(),r=Object(b.f)();return Object(a.jsx)(je.a,{className:n.paper,children:Object(a.jsxs)(yt.a,{className:n.root,onClick:function(){r.push("/users/".concat(t._id))},children:[Object(a.jsx)(z,{user:t}),Object(a.jsx)(_t.a,{children:Object(a.jsxs)(Q.a,{variant:"body1",className:n.friendName,children:[t.first_name," ",t.last_name]})})]})})},Pt=n(291),It=Object(x.a)((function(e){var t;return{root:{backgroundColor:"rgb(32,33,34)",display:"flex",flexWrap:"wrap",alignItems:"center",cursor:"pointer"},friendName:{color:"white",flexWrap:"wrap"},paper:(t={padding:e.spacing(2),textAlign:"center",backgroundColor:"rgb(32,33,34)",color:"white",margin:"20px 10px",width:"25%"},Object(Xe.a)(t,e.breakpoints.down("md"),{width:"40%"}),Object(Xe.a)(t,e.breakpoints.down("sm"),{width:"100%"}),t),userDetails:{flexDirection:"row",flexWrap:"wrap"},buttonContainer:{width:"100%",justifyContent:"space-around"},acceptButton:{color:"green"},declineButton:{color:"red"}}})),Rt=function(e){var t=e.friend,n=e.handleAcceptRequest,r=e.handleDeclineRequest,i=It(),c=Object(b.f)();return Object(a.jsx)(je.a,{className:i.paper,children:Object(a.jsxs)(yt.a,{className:i.root,children:[Object(a.jsx)(z,{user:t}),Object(a.jsx)(_t.a,{className:i.userDetails,onClick:function(){c.push("/users/".concat(t._id))},children:Object(a.jsxs)(Q.a,{variant:"body1",className:i.friendName,children:[t.first_name," ",t.last_name]})}),Object(a.jsxs)(Pt.a,{className:i.buttonContainer,children:[Object(a.jsx)($.a,{size:"small",className:i.acceptButton,onClick:function(){return n(t._id)},children:"Accept"}),Object(a.jsx)($.a,{size:"small",className:i.declineButton,onClick:function(){return r(t._id)},children:"Decline"})]})]})})},qt=n(299),Lt=Object(x.a)((function(e){return{root:{marginBottom:30},inputRoot:{color:"white","& .MuiOutlinedInput-notchedOutline":{borderColor:"white"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"white"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"white"}},errorText:{color:"red",fontWeight:"bold"}}})),At=function(){var e=Object(r.useState)([]),t=Object(j.a)(e,2),n=t[0],i=t[1],c=Object(r.useState)(null),s=Object(j.a)(c,2),o=s[0],l=s[1],d=Object(b.f)(),u=Lt();Object(r.useEffect)((function(){h.get("/users").then((function(e){i(e.data.users)}))}),[]);var m=function(e){if("Enter"===e.key){var t=e.target.value.split(" "),n=t[0],a=t[1];h.post("/users/search",{firstTerm:n,secondTerm:a}).then((function(e){e.data.user?d.push("/users/".concat(e.data.user._id)):(l(e.data.error),setTimeout((function(){l(null)}),3e3))}))}};return n?Object(a.jsxs)("div",{style:{width:"90%"},className:u.root,children:[o&&Object(a.jsx)("div",{children:Object(a.jsx)(Q.a,{variant:"body1",className:u.errorText,children:o})}),Object(a.jsx)(qt.a,{id:"userSearch",options:n.map((function(e){return"".concat(e.first_name," ").concat(e.last_name)})),classes:{inputRoot:u.inputRoot},renderInput:function(e){return Object(a.jsx)(Z.a,Object(Qe.a)(Object(Qe.a)({},e),{},{InputLabelProps:{style:{color:"white"}},label:"User search",margin:"normal",variant:"outlined",onKeyPress:m}))}})]}):Object(a.jsx)("div",{className:"loader",children:"Loading..."})},Tt=Object(x.a)((function(e){return{container:{backgroundColor:"rgb(23, 24, 25)",minHeight:"100vh",marginTop:"10px"},grid:{justifyContent:"center"},friendGrid:{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyItems:"flex-end"},paper:{padding:e.spacing(2),textAlign:"center",backgroundColor:"rgb(32,33,34)",color:"white",marginBottom:20},heading:{color:"white",textAlign:"left",width:"100%",marginBottom:10},bodyText:{color:"white",marginBottom:20,fontSize:14}}})),Ut=function(e){var t=e.user,n=Object(r.useState)([]),i=Object(j.a)(n,2),c=i[0],s=i[1],o=Object(r.useState)([]),l=Object(j.a)(o,2),d=l[0],u=l[1],b=Tt(),m=Je({userFriends:c,setUserFriends:s,friendRequests:d,setFriendRequests:u}),p=m.handleAcceptRequest,x=m.handleDeclineRequest;return Object(r.useEffect)((function(){t&&h.get("/users/".concat(t.id)).then((function(e){s(e.data.user.friends),u(e.data.user.friendRequests)}))}),[t]),Object(a.jsx)(X.a,{maxWidth:"xl",className:b.container,children:Object(a.jsx)(Y.a,{container:!0,spacing:3,className:b.grid,children:Object(a.jsxs)(Y.a,{item:!0,xs:12,md:9,className:b.friendGrid,children:[Object(a.jsx)(Q.a,{variant:"h6",className:b.heading,children:"Search users"}),Object(a.jsx)(At,{}),d?Object(a.jsx)(Q.a,{variant:"h6",className:b.heading,children:"Friend requests"}):null,d.length>0?d.map((function(e){return Object(a.jsx)(Rt,{friend:e,handleAcceptRequest:p,handleDeclineRequest:x},e._id)})):Object(a.jsx)(Q.a,{variant:"body1",className:b.bodyText,children:"No friend requests!"}),Object(a.jsx)(Q.a,{variant:"h6",className:b.heading,children:"Friends"}),c.length>0?c.map((function(e){return Object(a.jsx)(St,{friend:e},e._id)})):Object(a.jsx)(Q.a,{variant:"body1",className:b.bodyText,children:"No friends yet!"})]})})})},Et=n(292),Dt=n(296),Bt=n(294),Wt=n(295),Kt=n(293),zt=Object(x.a)((function(e){return{container:{backgroundColor:"rgb(23, 24, 25)"},dangerButton:{color:"rgb(242,16,90)"}}})),Ht=function(e){var t=e.dialogOpen,n=e.toggleDialog,r=e.handleDelete,i=zt();return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(Et.a,{open:t,onClose:n,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",className:i.container,children:[Object(a.jsx)(Kt.a,{id:"alert-dialog-title",children:"Delete account"}),Object(a.jsx)(Bt.a,{children:Object(a.jsx)(Wt.a,{id:"alert-dialog-description",children:"Are you sure that you want to delete your account?"})}),Object(a.jsxs)(Dt.a,{children:[Object(a.jsx)($.a,{onClick:n,color:"primary",children:"Cancel"}),Object(a.jsx)($.a,{onClick:r,autoFocus:!0,className:i.dangerButton,children:"Delete"})]})]})})},Mt=Object(x.a)((function(e){return{container:{backgroundColor:"rgb(23, 24, 25)",minHeight:"100vh",marginTop:"10px"},grid:{justifyContent:"center"},paper:{padding:e.spacing(2),textAlign:"center",backgroundColor:"rgb(32,33,34)",color:"white",margin:"0 5px 20px 5px"},avatarContainer:{borderRadius:"50%",height:"150px",width:"100%",border:"1px solid rgb(32,33,34)",marginBottom:20},avatar:{overflow:"hidden",borderRadius:"50%",height:"150px",width:"150px"},heading:{marginBottom:20},button:{color:"red",borderColor:"red",margin:"20px 10px"}}})),Gt=function(e){var t=e.user,n=e.setUser,i=Object(r.useState)(!1),c=Object(j.a)(i,2),s=c[0],o=c[1],l=Object(r.useState)(!1),d=Object(j.a)(l,2),u=d[0],m=(d[1],Mt()),p=Object(b.f)(),x=function(){o(!s)};return u?Object(a.jsx)("div",{class:"loader",children:"Loading..."}):Object(a.jsxs)(X.a,{maxWidth:"xl",className:m.container,children:[Object(a.jsx)(Y.a,{container:!0,spacing:3,className:m.grid,children:Object(a.jsx)(Y.a,{item:!0,xs:12,md:6,children:Object(a.jsxs)(je.a,{className:m.paper,children:[Object(a.jsx)(Q.a,{variant:"h5",className:m.heading,children:"My Account"}),Object(a.jsx)("div",{className:m.avatarContainer,children:Object(a.jsx)("img",{src:t.profilePicUrl,className:m.avatar})}),Object(a.jsxs)(Q.a,{variant:"body1",children:[t.first_name," ",t.last_name]}),Object(a.jsx)(Q.a,{variant:"body1",children:t.email}),Object(a.jsx)($.a,{variant:"outlined",className:m.button,startIcon:Object(a.jsx)($e.a,{}),onClick:x,children:"Delete account"})]})})}),Object(a.jsx)(Ht,{dialogOpen:s,toggleDialog:x,handleDelete:function(){o(!1),n(""),p.push("/login"),h.delete("/users/".concat(t.id)).then((function(e){}))}})]})};n(219);n(220).config();var Jt=function(){var e=p("user",""),t=Object(j.a)(e,2),n=t[0],r=t[1];Object(b.f)();return Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)(J,{user:n,setUser:r}),Object(a.jsxs)(b.c,{children:[Object(a.jsx)(b.a,{path:"/account",children:Object(a.jsx)(Gt,{user:n,setUser:r})}),Object(a.jsx)(b.a,{path:"/friends",children:Object(a.jsx)(Ut,{user:n})}),Object(a.jsx)(b.a,{path:"/users/:userId",children:Object(a.jsx)(Nt,{user:n,setUser:r})}),Object(a.jsx)(b.a,{path:"/login",children:Object(a.jsx)(ue,{user:n,setUser:r})}),Object(a.jsx)(b.a,{path:"/",children:Object(a.jsx)(Ye,{user:n,setUser:r})})]})]})},Vt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,303)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),i(e),c(e)}))};s.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(l.a,{theme:u,children:Object(a.jsx)(o.a,{children:Object(a.jsx)(Jt,{})})})}),document.getElementById("root")),Vt()}},[[223,1,2]]]);
//# sourceMappingURL=main.8a17be01.chunk.js.map